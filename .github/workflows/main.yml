name: action

on:
  [ pull_request_target ]

env:
   cache-build-name: build-env

jobs:
  
  preper:
    runs-on: self-hosted
    steps:
      - name: Git clone 
        uses: actions/checkout@v2
        with:
          fetch-depth: 0
      - name: Checkout tools repo
        uses: actions/checkout@v2
        with:
          ref: ${{ github.event.pull_request.head.sha }}
          path: resources
      - name: Prep
        run: |
            ls -la;
            mkdir build-env;
            mv resources/Labs/"1. Verilog. Adder"/* build-env/;
            cp -Rr ~/mpsis/tb/miriscv_alu.v build-env/;
            ls -la 
            cd build-env
            ls -la
      - name: Build
        run: |
            cd build-env;
            mv miriscv_tb/tb/tb_miriscv_alu.v /tmp;
            mv v

